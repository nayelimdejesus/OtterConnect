<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Otter Connections</title>
	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="/css/userPosts.css" rel="stylesheet" type="text/css" />
	<!-- JavaScript Bundle with Popper -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js">
	</script>
</head>

<body>

	<header>
		<div class="head">
			<h1>Admin Post Editor</h1>
			<button id = "userLogout" > <a href="/logout"><i style="font-size:24px" class="fa">&#xf08b;</i></a> </button> 
		</div>
	</header>

  <hr>


	<main>
	<div class="posts">
		<% for (post of posts) { %>
			<div class="deleter">
				<div class="card sec">
					<div class="card-head">
						<div class="pfp">
							<img class="profilePic" src="<%=post.portrait%>" alt="profile">
						</div>
						<div class="name">
							<h4>
								<%=post.username %>
							</h4>
						</div>
						<div class="del">
							<button class="deletePost" postId="<%=post.postId%>"><i style="font-size:24px" class="fa">&#xf014;</i></button>
						</div>
					</div>
					<div class="card-body">
						<div class="paragraph">
							<div class="para">
								<p id="postPara">
									<%=post.post%>
								</p>
							</div>
						</div>
						<div class="attachment">
							<div>
								<% if (post.image !="NULL" ) { %>
									<img class="photo" src="<%=post.image%>">
									<% } %>
							</div>
						</div>
					</div>
					<div class="card-footer">
						<div class="date">
							<%=post.dopISO%>
						</div>
						<div class="likes">
							<span><i class="fa fa-thumbs-up"></i> <%=post.likes%> <i class="fa fa-thumbs-down"></i> <%=post.dislikes%></span>
						</div>
					</div>
				</div>
			</div>
			<br>
			<% } %>
	</div>
	</main>


	<script>

		$(".deletePost").on("click", confirmDeletePost);

		function confirmDeletePost() {

			let deletePost = confirm(`Are you sure you want to delete the post?`);

			if (deletePost) {

				//we need to delete record
				let postId = $(this).attr("postId");

				window.location.href = `/admin/delete?postId=${postId}`;

			}

		}

	</script>

</body>

</html>